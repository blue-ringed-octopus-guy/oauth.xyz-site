{"version":3,"sources":["webpack:///./src/components/transactionresponse.js","webpack:///./src/pages/transactionresponse.mdx"],"names":["TransactionRequest","interactionValues","label","redirect","interaction_url","device","user_code","wait","access_token","value","type","codeValues","handle","on","client_handle","interact_handle","user_handle","resources_handle","key_handle","state","selected","interaction","change","field","s","_this","setState","render","transaction","Object","keys","reduce","result","key","interact","response","objectSpread_default","selectors","react_default","a","createElement","selector","onChange","options","concat","map","selectorlist","code","from","to","React","Component","layoutProps","MDXContent","props","_React$Component","call","this","layout","DefaultLayout","_this$props","components","objectWithoutPropertiesLoose_default","dist","name","Layout","assign","seo","title","keywords","gatsby_browser_entry","transactionresponse","parentName","_frontmatter"],"mappings":"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","file":"component---src-pages-transactionresponse-mdx-8069372eb06e55e1e74c.js","sourcesContent":["import React from 'react'\n\nimport Code from '../components/code'\nimport Selector from '../components/selector'\nimport SelectorList from '../components/selectorlist'\n\nclass TransactionRequest extends React.Component {\n\n  \n  interactionValues = {\n    label: 'Next Step',\n    redirect: {\n      interaction_url: \"https://server.example.com/interact/4CF492MLVMSW9MKMXKHQ\"\n    },\n    device: {\n      interaction_url: \"https://server.example.com/interact/device\",\n      user_code: \"A1BC-3DFF\"\n    },\n    wait: {\n      wait: 30\n    },\n    access_token: {\n      access_token: {\n          value: \"OS9M2PMHKUR64TB8N6BW7OZB8CDFONP219RP1LT0\",\n          type: \"bearer\"\n      }\n    }\n  }\n\n  codeValues = {\n    handle: {\n      label: 'Transaction Handle',\n      on: {\n        value: \"80UPRY5NM33OMUKMKSKU\",\n        type: \"bearer\"\n      }\n    },\n    client_handle: {\n      label: 'Client Handle',\n      on: {\n        value: \"VBUEOIQA82PBY2ZDJW7Q\",\n        type: 'bearer'\n      }\n    },\n    interact_handle: {\n      label: 'Interact Handle',\n      on: {\n        value: \"JMMLJ6393FI7ST9B1SRS\",\n        type: 'bearer'\n      }\n    },\n    \n    user_handle: {\n      label: 'User Handle',\n      on: {\n        value: \"XUT2MFM1XBIKJKSDU8QM\",\n        type: 'bearer'\n      }\n    },\n    \n    resources_handle: {\n      label: 'Resources Handle',\n      on: {\n        value: \"KLKP36N7GPOKRF3KGH5N\",\n        type: 'bearer'\n      }\n    },\n    \n    key_handle: {\n      label: 'Key Handle',\n      on: {\n        value: \"7C7C4AZ9KHRS6X63AJAO\",\n        type: 'bearer'\n      }\n    }\n  }\n  \n  state = {\n    selected: {\n      handle: 'on',\n      client_handle: 'on',\n      resources_handle: 'off',\n      interact_handle: 'off',\n      key_handle: 'on',\n      user_handle: 'off',\n      interaction: 'redirect'\n    }\n  }\n\n  \n  change = (field) => (value) => {\n\n    const s = this.state.selected;\n    s[field] = value;\n    \n    if (field === 'handle' && value === 'off') {\n      s.interaction = 'access_token';\n    }\n    \n    if (field === 'interaction' && value !== 'access_token') {\n      s.handle = 'on';\n    }\n    \n    this.setState({\n      selected: s\n    });\n    \n  }\n  \n  render = () => {\n\n    // build the transaction object based on the current selection\n    const transaction = Object.keys(this.codeValues).reduce((result, key) => {\n      result[key] = this.codeValues[key][this.state.selected[key]];\n      return result;\n    }, {});\n    \n    const interact = this.interactionValues[this.state.selected.interaction];\n    \n    const response = {...interact, ...transaction};\n    \n    \n    // build next-step selector first\n    const nextOptions = {\n      redirect: \"Redirect\",\n      device: \"Device\",\n      wait: \"Wait\",\n      access_token: \"Token\"\n    }\n    \n    // build the selectors\n    const selectors = [\n      <Selector onChange={this.change('interaction')} label={this.interactionValues.label} selected={this.state.selected.interaction} options={nextOptions} />\n    ]\n    .concat(Object.keys(this.codeValues).map((field) => {\n      return (\n        <Selector onChange={this.change(field)} label={this.codeValues[field].label} selected={this.state.selected[field]} />\n      );\n    }));\n\n    \n    \n    \n    return (\n      <div>\n          <SelectorList>\n            {selectors}\n          </SelectorList>\n          <Code\n            from=\"as\" to=\"client\"\n            code={response} \n          />\n      </div>\n    );\n  \n  }\n\n};\n\nexport default TransactionRequest;","import React from 'react'\nimport { MDXTag } from '@mdx-js/tag'\n\n\nimport DefaultLayout from \"/Users/jricher/Projects/oauth.xyz-site/src/components/layout.js\";\nimport { Link } from 'gatsby';\nimport TransactionResponse from '../components/transactionresponse';\nimport SEO from '../components/seo';\nimport Code from '../components/code';\nconst layoutProps = {};\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.layout = DefaultLayout;\n  }\n\n  render() {\n    const {\n      components,\n      ...props\n    } = this.props;\n    return <MDXTag name=\"wrapper\" Layout={this.layout} layoutProps={Object.assign({}, layoutProps, props)} components={components}>\n\n\n\n      <SEO title=\"Transaction Response\" keywords={['oauth', 'authorization', 'security']} />\n      <MDXTag name=\"h1\" components={components}>{`Transaction Response`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The response from the transaction endpoint tells the client what it needs to do next, including if it needs to `}<Link to=\"/interaction\">{`interact with the user`}</Link>{` and any `}<Link to=\"/tokens\">{`tokens that have been issued`}</Link>{`. `}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`If the transaction can be continued by the client, the AS includes a transaction handle in the response as well. This handle is used by the client for any subsequent references to this transaction. `}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The response can also include handles that the client can use in future transactions in lieu of any of the request sections.`}</MDXTag>\n      <TransactionResponse />\n      <MDXTag name=\"p\" components={components}>{`Each of these sections is detailed below.`}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`Next action`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Foremost, the AS needs to tell the client what to do next. This may be getting the user to `}<Link to=\"/interaction\">{`interact with the AS directly`}</Link>{`, waiting until polling again, or heading to the resource server to `}<Link to=\"/tokens\">{`use the token`}</Link>{`. `}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Both the interaction and poll-wait style responses require the transaction handle, below. If a transaction handle is included with the access token response, the client can use this handle to get a new access token in the event the first one expires or is revoked, so long as the trnasaction handle is still valid. `}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`Transaction Handle`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`This `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`handle`}</MDXTag>{` is used by the client to continue the transaction from its previous state. The value returned by the AS is unique, random, and not reused by the AS. That is to say, an ongoing transaction will be represented by a single handle at a given time, and that handle will change over time. `}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`Client Handle`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`If a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`client_handle`}</MDXTag>{` is returned by the AS, the client can use this handle in lieu of the information sent in the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`client`}</MDXTag>{` block in the request for future transactions. `}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`Interact Handle`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`If an `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`interact_handle`}</MDXTag>{` is returned by the AS, the client can use this handle in lieu of the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`interact`}</MDXTag>{` portion of the transaction request in future transactions. However, for a redirect based interaction, as this section includes the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`state`}</MDXTag>{` value which is supposed to be unguessable and unique per transaction, this response doesn't make sense in such cases.`}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`User Handle`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`If a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`user_handle`}</MDXTag>{` is returned by the AS, the client can use this handle in lieu of the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`user`}</MDXTag>{` portion of the transaction request to represent the same user in future requests, akin to UMA 2's PCT.`}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`Resource Handle`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`If a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`resource_handle`}</MDXTag>{` is returned by the AS, the client can use this handle in lieu of the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`resource`}</MDXTag>{` portions of the transaction request to request the same set of resources in a future transaction. `}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`Key Handle`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`If a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`key_handle`}</MDXTag>{` is returned by the AS, the client can use this handle in lieu of the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`key`}</MDXTag>{` section of the transaction request to reference the same key presented and proved by the client in this transaction. When presenting such key handles in a future request, the client must still `}<Link to=\"/keys\">{`bind the request to the referenced key`}</Link>{`.`}</MDXTag>\n           </MDXTag>;\n  }\n\n}\nexport const _frontmatter = {};\n    "],"sourceRoot":""}