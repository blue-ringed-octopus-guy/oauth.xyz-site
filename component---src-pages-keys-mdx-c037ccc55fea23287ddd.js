(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{477:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m})),n.d(t,"_frontmatter",(function(){return p}));n(7),n(6),n(4),n(8);var a=n(0),o=n.n(a),r=n(467),c=n(469),s=n(468),i=n(470),l=n(40);var m=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this).layout=c.a,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.prototype.render=function(){var e=this.props,t=e.components,n=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["components"]);return o.a.createElement(r.MDXTag,{name:"wrapper",Layout:this.layout,layoutProps:n,components:t},o.a.createElement(s.a,{title:"Keys",keywords:["oauth","authorization","security"]}),o.a.createElement(r.MDXTag,{name:"h1",components:t},"Key Types"),o.a.createElement(r.MDXTag,{name:"p",components:t},"The client can present a key to the AS during the transaction process that it can use to bind itself to this and future requests. The AS can restrict access to certain keys, associated with particular clients and controlled through a registration process. The AS can also allow clients to dynamically present and prove a key at runtime, such as a key generated on a client device and bound to only that instance of the client software on that device. "),o.a.createElement(r.MDXTag,{name:"h2",components:t},"JSON Web Key Set (JWKS)"),o.a.createElement(r.MDXTag,{name:"p",components:t},"This client sends its public key to the server formatted as a JSON Web Key Set (JWKS). The keys must have a ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"kid")," (key identifier) field and an ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"alg")," (algorithm) field."),o.a.createElement(i.a,{from:"client",to:"as",language:"json",codeString:'{\n    "key": {\n        "jwks": {\n            "keys": [\n                {\n                    "kty": "RSA",\n                    "e": "AQAB",\n                    "kid": "xyz-1",\n                    "alg": "RS256",\n                    "n": "kOB5rR4Jv0GMeLaY6_It_r3ORwdf8ci_JtffXyaSx8xYJCCNaOKNJn_Oz0YhdHbXTeWO5AoyspDWJbN5w_7bdWDxgpD-y6jnD1u9YhBOCWObNPFvpkTM8LC7SdXGRKx2k8Me2r_GssYlyRpqvpBlY5-ejCywKRBfctRcnhTTGNztbbDBUyDSWmFMVCHe5mXT4cL0BwrZC6S-uu-LAx06aKwQOPwYOGOslK8WPm1yGdkaA1uF_FpS6LS63WYPHi_Ap2B7_8Wbw4ttzbMS_doJvuDagW8A1Ip3fXFAHtRAcKw7rdI4_Xln66hJxFekpdfWdiPQddQ6Y1cK2U3obvUg7w"\n                }\n            ]\n        }\n    }\n}\n'}),o.a.createElement(r.MDXTag,{name:"h2",components:t},"X509 Certificate"),o.a.createElement(r.MDXTag,{name:"p",components:t},"The client indicates its certificate as either an encoded certificate string, or as a certificate thumbprint as in OAuth 2's certificate-bound access token methods."),o.a.createElement(i.a,{from:"client",to:"as",language:"json",codeString:'{\n    "key": {\n        "cert": "MIIEHDCCAwSgAwIBAgIBATANBgkqhkiG9w0BAQsFADCBmjE3MDUGA1UEAwwuQmVzcG9rZSBFbmdpbmVlcmluZyBSb290IENlcnRpZmljYXRlIEF1dGhvcml0eTELMAkGA1UECAwCTUExCzAJBgNVBAYTAlVTMRkwFwYJKoZIhvcNAQkBFgpjYUBic3BrLmlvMRwwGgYDVQQKDBNCZXNwb2tlIEVuZ2luZWVyaW5nMQwwCgYDVQQLDANNVEkwHhcNMTkwNDEwMjE0MDI5WhcNMjQwNDA4MjE0MDI5WjB8MRIwEAYDVQQDDAlsb2NhbGhvc3QxCzAJBgNVBAgMAk1BMQswCQYDVQQGEwJVUzEgMB4GCSqGSIb3DQEJARYRdGxzY2xpZW50QGJzcGsuaW8xHDAaBgNVBAoME0Jlc3Bva2UgRW5naW5lZXJpbmcxDDAKBgNVBAsMA01USTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMmaXQHbs/wc1RpsQ6Orzf6rN+q2ijaZbQxD8oi+XaaN0P/gnE13JqQduvdq77OmJ4bQLokqsd0BexnI07Njsl8nkDDYpe8rNve5TjyUDCfbwgS7U1CluYenXmNQbaYNDOmCdHwwUjV4kKREg6DGAx22Oq7+VHPTeeFgyw4kQgWRSfDENWY3KUXJlb/vKR6lQ+aOJytkvj8kVZQtWupPbvwoJe0na/ISNAOhL74w20DWWoDKoNltXsEtflNljVoi5nqsmZQcjfjt6LO0T7O1OX3Cwu2xWx8KZ3n/2ocuRqKEJHqUGfeDtuQNt6Jz79v/OTr8puLWaD+uyk6NbtGjoQsCAwEAAaOBiTCBhjAJBgNVHRMEAjAAMAsGA1UdDwQEAwIF4DBsBgNVHREEZTBjgglsb2NhbGhvc3SCD3Rsc2NsaWVudC5sb2NhbIcEwKgBBIERdGxzY2xpZW50QGJzcGsuaW+GF2h0dHA6Ly90bHNjbGllbnQubG9jYWwvhhNzc2g6dGxzY2xpZW50LmxvY2FsMA0GCSqGSIb3DQEBCwUAA4IBAQCKKv8WlLrT4Z5NazaUrYtlTF+2v0tvZBQ7qzJQjlOqAcvxry/d2zyhiRCRS/v318YCJBEv4Iq2W3I3JMMyAYEe2573HzT7rH3xQP12yZyRQnetdiVM1Z1KaXwfrPDLs72hUeELtxIcfZ0M085jLboXhufHI6kqm3NCyCCTihe2ck5RmCc5l2KBO/vAHF0ihhFOOOby1v6qbPHQcxAU6rEb907/p6BW/LV1NCgYB1QtFSfGxowqb9FRIMD2kvMSmO0EMxgwZ6k6spa+jk0IsI3klwLW9b+Tfn/daUbIDctxeJneq2anQyU2znBgQl6KILDSF4eaOqlBut/KNZHHazJh"\n    }\n}\n'}),o.a.createElement(i.a,{from:"client",to:"as",language:"json",codeString:'{\n    "key": {\n        "cert#S256": "bwcK0esc3ACC3DB2Y5_lESsXE8o9ltc05O89jdN-dg2"\n    }\n}\n'}),o.a.createElement(r.MDXTag,{name:"h2",components:t},"Decentralized Identifier"),o.a.createElement(r.MDXTag,{name:"p",components:t},"The ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"did")," key method uses a ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"did")," URI to indicate the key. The AS resolves the key document using DID resolution."),o.a.createElement(i.a,{from:"client",to:"as",language:"json",codeString:'{\n    "key": {\n        "did": "did:example:CV3BVVXK2PWWLCRQLRFU#xyz-1"\n    }\n}\n'}),o.a.createElement(r.MDXTag,{name:"h1",components:t},"Presentation Types"),o.a.createElement(r.MDXTag,{name:"p",components:t},"When the client starts a ",o.a.createElement(l.Link,{to:"/transactionrequest"},"transaction request")," or continues an ongoing transaction, it must prove possession of any presented keys. The type of proof is indicated by the ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"proof")," parameter value."),o.a.createElement(r.MDXTag,{name:"blockquote",components:t},o.a.createElement(r.MDXTag,{name:"p",components:t,parentName:"blockquote"},'Should we also have an "embedded JWS" method, for instance simply turning the request body into a JWS wrapped by the signature in compact format? That feels counter to the readable nature of the protocol, but since the body is JSON it could potentially work.')),o.a.createElement(r.MDXTag,{name:"h2",components:t},"Detached JSON Web Signature"),o.a.createElement(r.MDXTag,{name:"p",components:t},"This key presentation method is indicated by the ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"jwsd")," value of the ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"proof")," field and uses a detached JWS to sign the request body to the transaction endpoint, which itself is a JSON object. The body is taken as a byte stream, with no parsing or interpretation, and signed using the key. The header of the JWS must include the key ID, the algorithm (which must not be ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"none"),"), and the ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"b64")," attribute to indicate that it is detached. The calculated JWS is set as the ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"Detached-JWS")," HTTP header."),o.a.createElement(i.a,{from:"client",to:"as",language:"http",codeString:'POST /transaction HTTP/1.1\nHost: server.example.com\nContent-Type: application/json\nDetached-JWS: eyJiNjQiOmZhbHNlLCJhbGciOiJSUzI1NiIsImtpZCI6Inh5ei0xIn0..Y287HMtaY0EegEjoTd_04a4GC6qV48GgVbGKOhHdJnDtD0VuUlVjLfwne8AuUY3U7e89zUWwXLnAYK_BiS84M8EsrFvmv8yDLWzqveeIpcN5_ysveQnYt9Dqi32w6IOtAywkNUDZeJEdc3z5s9Ei8qrYFN2fxcu28YS4e8e_cHTK57003WJu-wFn2TJUmAbHuqvUsyTb-nzYOKxuCKlqQItJF7E-cwSb_xULu-3f77BEU_vGbNYo5ZBa2B7UHO-kWNMSgbW2yeNNLbLC18Kv80GF22Y7SbZt0e2TwnR2Aa2zksuUbntQ5c7a1-gxtnXzuIKa34OekrnyqE1hmVWpeQ\n \n{\n    "client": {\n        "name": "My Client Display Name",\n        "uri": "https://example.net/client"\n    },\n    "resources": [\n        "dolphin-metadata"\n    ],\n    "interact": {\n        "type": "redirect",\n        "callback": "https://client.example.net/return/123455"\n    },\n    "key": {\n\t\t"proof": "jwsd",\n        "jwks": {\n            "keys": [\n                {\n                    "kty": "RSA",\n                    "e": "AQAB",\n                    "kid": "xyz-1",\n                    "alg": "RS256",\n                    "n": "kOB5rR4Jv0GMeLaY6_It_r3ORwdf8ci_JtffXyaSx8xYJCCNaOKNJn_Oz0YhdHbXTeWO5AoyspDWJbN5w_7bdWDxgpD-y6jnD1u9YhBOCWObNPFvpkTM8LC7SdXGRKx2k8Me2r_GssYlyRpqvpBlY5-ejCywKRBfctRcnhTTGNztbbDBUyDSWmFMVCHe5mXT4cL0BwrZC6S-uu-LAx06aKwQOPwYOGOslK8WPm1yGdkaA1uF_FpS6LS63WYPHi_Ap2B7_8Wbw4ttzbMS_doJvuDagW8A1Ip3fXFAHtRAcKw7rdI4_Xln66hJxFekpdfWdiPQddQ6Y1cK2U3obvUg7w"\n                }\n            ]\n        }\n    }\n}\n'}),o.a.createElement(r.MDXTag,{name:"blockquote",components:t},o.a.createElement(r.MDXTag,{name:"p",components:t,parentName:"blockquote"},"This is susceptible to any number of issues with data transformation, and it doesn't protect the request URL or header, only the body. However, the body is not transformed by adding the signature, which is a benefit for simplicity.")),o.a.createElement(r.MDXTag,{name:"h2",components:t},"HTTP Signatures (Cavage Signatures)"),o.a.createElement(r.MDXTag,{name:"p",components:t},"This key presentation method is indicated by the ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"httpsig")," value of the ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"proof")," field, and it uses the signature method in ",o.a.createElement("a",{href:"https://tools.ietf.org/html/draft-cavage-http-signatures-11"},"Signing HTTP Messages"),". The signature is presented in the ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"Signature")," header and has to cover the body through use of the HTTP Digest header. "),o.a.createElement(i.a,{from:"client",to:"as",language:"http",codeString:'POST /transaction HTTP/1.1\nHost: server.example.com\nContent-Type: application/json\nSignature: keyId="xyz-1", algorithm="hs2019", created=1402170695, expires=1402170995, headers="(request-target) (created) (expires) host date digest content-length", signature="TM8LC7SdXGRKx2k8Me2r_GssYlyRpqvpBlY5-ejCywKRBfctRcnhTTGNztbbDBUyDSWmFMVCHe5mXT4cL0BwrZC6S-uu-LAx06aKwQ"\nDigest: SHA-256=X48E9qOokqqrvdts8nOJRJN3OWDUoyWxBf7kbu9DBPE=\n \n{\n    "client": {\n        "name": "My Client Display Name",\n        "uri": "https://example.net/client"\n    },\n    "resources": [\n        "dolphin-metadata"\n    ],\n    "interact": {\n        "type": "redirect",\n        "callback": "https://client.example.net/return/123455"\n    },\n    "key": {\n\t\t"proof": "httpsig",\n        "jwks": {\n            "keys": [\n                {\n                    "kty": "RSA",\n                    "e": "AQAB",\n                    "kid": "xyz-1",\n                    "alg": "RS256",\n                    "n": "kOB5rR4Jv0GMeLaY6_It_r3ORwdf8ci_JtffXyaSx8xYJCCNaOKNJn_Oz0YhdHbXTeWO5AoyspDWJbN5w_7bdWDxgpD-y6jnD1u9YhBOCWObNPFvpkTM8LC7SdXGRKx2k8Me2r_GssYlyRpqvpBlY5-ejCywKRBfctRcnhTTGNztbbDBUyDSWmFMVCHe5mXT4cL0BwrZC6S-uu-LAx06aKwQOPwYOGOslK8WPm1yGdkaA1uF_FpS6LS63WYPHi_Ap2B7_8Wbw4ttzbMS_doJvuDagW8A1Ip3fXFAHtRAcKw7rdI4_Xln66hJxFekpdfWdiPQddQ6Y1cK2U3obvUg7w"\n                }\n            ]\n        }\n    }\n}\n'}),o.a.createElement(r.MDXTag,{name:"h2",components:t},"Mutual TLS"),o.a.createElement(r.MDXTag,{name:"p",components:t},"The ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"mtls")," key presentation method uses the client certificate presented at the TLS layer to authorize the transaction. No additional fields or headers are added to the HTTP message or JSON body, though a TLS terminating reverse proxy can communicate the client certificate to the AS through a special header. "),o.a.createElement(i.a,{from:"client",to:"as",language:"http",codeString:'POST /transaction HTTP/1.1\nHost: server.example.com\nContent-Type: application/json\n \n{\n    "client": {\n        "name": "My Client Display Name",\n        "uri": "https://example.net/client"\n    },\n    "resources": [\n        "dolphin-metadata"\n    ],\n    "interact": {\n        "type": "redirect",\n        "callback": "https://client.example.net/return/123455"\n    },\n    "key": {\n        "cert": "MIIEHDCCAwSgAwIBAgIBATANBgkqhkiG9w0BAQsFADCBmjE3MDUGA1UEAwwuQmVzcG9rZSBFbmdpbmVlcmluZyBSb290IENlcnRpZmljYXRlIEF1dGhvcml0eTELMAkGA1UECAwCTUExCzAJBgNVBAYTAlVTMRkwFwYJKoZIhvcNAQkBFgpjYUBic3BrLmlvMRwwGgYDVQQKDBNCZXNwb2tlIEVuZ2luZWVyaW5nMQwwCgYDVQQLDANNVEkwHhcNMTkwNDEwMjE0MDI5WhcNMjQwNDA4MjE0MDI5WjB8MRIwEAYDVQQDDAlsb2NhbGhvc3QxCzAJBgNVBAgMAk1BMQswCQYDVQQGEwJVUzEgMB4GCSqGSIb3DQEJARYRdGxzY2xpZW50QGJzcGsuaW8xHDAaBgNVBAoME0Jlc3Bva2UgRW5naW5lZXJpbmcxDDAKBgNVBAsMA01USTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMmaXQHbs/wc1RpsQ6Orzf6rN+q2ijaZbQxD8oi+XaaN0P/gnE13JqQduvdq77OmJ4bQLokqsd0BexnI07Njsl8nkDDYpe8rNve5TjyUDCfbwgS7U1CluYenXmNQbaYNDOmCdHwwUjV4kKREg6DGAx22Oq7+VHPTeeFgyw4kQgWRSfDENWY3KUXJlb/vKR6lQ+aOJytkvj8kVZQtWupPbvwoJe0na/ISNAOhL74w20DWWoDKoNltXsEtflNljVoi5nqsmZQcjfjt6LO0T7O1OX3Cwu2xWx8KZ3n/2ocuRqKEJHqUGfeDtuQNt6Jz79v/OTr8puLWaD+uyk6NbtGjoQsCAwEAAaOBiTCBhjAJBgNVHRMEAjAAMAsGA1UdDwQEAwIF4DBsBgNVHREEZTBjgglsb2NhbGhvc3SCD3Rsc2NsaWVudC5sb2NhbIcEwKgBBIERdGxzY2xpZW50QGJzcGsuaW+GF2h0dHA6Ly90bHNjbGllbnQubG9jYWwvhhNzc2g6dGxzY2xpZW50LmxvY2FsMA0GCSqGSIb3DQEBCwUAA4IBAQCKKv8WlLrT4Z5NazaUrYtlTF+2v0tvZBQ7qzJQjlOqAcvxry/d2zyhiRCRS/v318YCJBEv4Iq2W3I3JMMyAYEe2573HzT7rH3xQP12yZyRQnetdiVM1Z1KaXwfrPDLs72hUeELtxIcfZ0M085jLboXhufHI6kqm3NCyCCTihe2ck5RmCc5l2KBO/vAHF0ihhFOOOby1v6qbPHQcxAU6rEb907/p6BW/LV1NCgYB1QtFSfGxowqb9FRIMD2kvMSmO0EMxgwZ6k6spa+jk0IsI3klwLW9b+Tfn/daUbIDctxeJneq2anQyU2znBgQl6KILDSF4eaOqlBut/KNZHHazJh"\n    }\n}\n'}))},a}(o.a.Component),p={}}}]);
//# sourceMappingURL=component---src-pages-keys-mdx-c037ccc55fea23287ddd.js.map