(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{154:function(e,t,a){"use strict";a.r(t);a(56);var n=a(77),o=a.n(n),i=a(7),s=a.n(i),c=a(0),r=a.n(c),l=a(163),m=a(158),p=a(155),h=(a(79),a(58),a(36),a(185),a(162)),d=a(207),u=a(209),g=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).codeValues={resources:{label:"Resources",full:[{actions:["read","write","dolphin"],locations:["https://server.example.net/","https://resource.local/other"],datatype:["metadata","images"]}],handle:["dolphin-metadata"],both:[{actions:["read","write","dolphin"],locations:["https://server.example.net/","https://resource.local/other"],datatype:["metadata","images"]},"dolphin-metadata"],options:{full:"Full",handle:"Handle",both:"Both",omit:"Off"}},key:{label:"Key",jwsd:{proof:"jwsd",jwks:{keys:[{kty:"RSA",e:"AQAB",kid:"xyz-1",alg:"RS256",n:"kOB5rR4Jv0GMeLaY6_It_r3ORwdf8ci_JtffXyaSx8xYJCCNaOKNJn_Oz0YhdHbXTeWO5AoyspDWJbN5w_7bdWDxgpD-y6jnD1u9YhBOCWObNPFvpkTM8LC7SdXGRKx2k8Me2r_GssYlyRpqvpBlY5-ejCywKRBfctRcnhTTGNztbbDBUyDSWmFMVCHe5mXT4cL0BwrZC6S-uu-LAx06aKwQOPwYOGOslK8WPm1yGdkaA1uF_FpS6LS63WYPHi_Ap2B7_8Wbw4ttzbMS_doJvuDagW8A1Ip3fXFAHtRAcKw7rdI4_Xln66hJxFekpdfWdiPQddQ6Y1cK2U3obvUg7w"}]}},httpsig:{proof:"httpsig",jwks:{keys:[{kty:"RSA",e:"AQAB",kid:"xyz-1",alg:"RS256",n:"kOB5rR4Jv0GMeLaY6_It_r3ORwdf8ci_JtffXyaSx8xYJCCNaOKNJn_Oz0YhdHbXTeWO5AoyspDWJbN5w_7bdWDxgpD-y6jnD1u9YhBOCWObNPFvpkTM8LC7SdXGRKx2k8Me2r_GssYlyRpqvpBlY5-ejCywKRBfctRcnhTTGNztbbDBUyDSWmFMVCHe5mXT4cL0BwrZC6S-uu-LAx06aKwQOPwYOGOslK8WPm1yGdkaA1uF_FpS6LS63WYPHi_Ap2B7_8Wbw4ttzbMS_doJvuDagW8A1Ip3fXFAHtRAcKw7rdI4_Xln66hJxFekpdfWdiPQddQ6Y1cK2U3obvUg7w"}]}},mtls:{proof:"mtls",cert:"MIIEHDCCAwSgAwIBAgIBATANBgkqhkiG9w0BAQsFADCBmjE3MDUGA1UEAwwuQmVzcG9rZSBFbmdpbmVlcmluZyBSb290IENlcnRpZmljYXRlIEF1dGhvcml0eTELMAkGA1UECAwCTUExCzAJBgNVBAYTAlVTMRkwFwYJKoZIhvcNAQkBFgpjYUBic3BrLmlvMRwwGgYDVQQKDBNCZXNwb2tlIEVuZ2luZWVyaW5nMQwwCgYDVQQLDANNVEkwHhcNMTkwNDEwMjE0MDI5WhcNMjQwNDA4MjE0MDI5WjB8MRIwEAYDVQQDDAlsb2NhbGhvc3QxCzAJBgNVBAgMAk1BMQswCQYDVQQGEwJVUzEgMB4GCSqGSIb3DQEJARYRdGxzY2xpZW50QGJzcGsuaW8xHDAaBgNVBAoME0Jlc3Bva2UgRW5naW5lZXJpbmcxDDAKBgNVBAsMA01USTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMmaXQHbs/wc1RpsQ6Orzf6rN+q2ijaZbQxD8oi+XaaN0P/gnE13JqQduvdq77OmJ4bQLokqsd0BexnI07Njsl8nkDDYpe8rNve5TjyUDCfbwgS7U1CluYenXmNQbaYNDOmCdHwwUjV4kKREg6DGAx22Oq7+VHPTeeFgyw4kQgWRSfDENWY3KUXJlb/vKR6lQ+aOJytkvj8kVZQtWupPbvwoJe0na/ISNAOhL74w20DWWoDKoNltXsEtflNljVoi5nqsmZQcjfjt6LO0T7O1OX3Cwu2xWx8KZ3n/2ocuRqKEJHqUGfeDtuQNt6Jz79v/OTr8puLWaD+uyk6NbtGjoQsCAwEAAaOBiTCBhjAJBgNVHRMEAjAAMAsGA1UdDwQEAwIF4DBsBgNVHREEZTBjgglsb2NhbGhvc3SCD3Rsc2NsaWVudC5sb2NhbIcEwKgBBIERdGxzY2xpZW50QGJzcGsuaW+GF2h0dHA6Ly90bHNjbGllbnQubG9jYWwvhhNzc2g6dGxzY2xpZW50LmxvY2FsMA0GCSqGSIb3DQEBCwUAA4IBAQCKKv8WlLrT4Z5NazaUrYtlTF+2v0tvZBQ7qzJQjlOqAcvxry/d2zyhiRCRS/v318YCJBEv4Iq2W3I3JMMyAYEe2573HzT7rH3xQP12yZyRQnetdiVM1Z1KaXwfrPDLs72hUeELtxIcfZ0M085jLboXhufHI6kqm3NCyCCTihe2ck5RmCc5l2KBO/vAHF0ihhFOOOby1v6qbPHQcxAU6rEb907/p6BW/LV1NCgYB1QtFSfGxowqb9FRIMD2kvMSmO0EMxgwZ6k6spa+jk0IsI3klwLW9b+Tfn/daUbIDctxeJneq2anQyU2znBgQl6KILDSF4eaOqlBut/KNZHHazJh"},thumbprint:{proof:"mtls","cert#S256":"bwcK0esc3ACC3DB2Y5_lESsXE8o9ltc05O89jdN-dg2"},did:{proof:"httpsig",did:"did:example:CV3BVVXK2PWWLCRQLRFU#xyz-1"},handle:"7C7C4AZ9KHRS6X63AJAO",options:{jwsd:"JWS",httpsig:"HTTP Signature",mtls:"MTLS",thumbprint:"MTLS (Thumbprint)",did:"DID",handle:"Handle",omit:"Off"}},interact:{label:"Interact",redirect:{redirect:!0,callback:{uri:"https://client.example.net/return/123455",nonce:"LKLTI25DK82FX4T4QFZC"}},device:{user_code:!0},qrcode:{redirect:!0,user_code:!0},didcomm:{didcomm:!0},didcommQuery:{didcomm_query:!0},options:{redirect:"Redirect",device:"Device",qrcode:"QR Code",didcomm:"DIDComm",didcommQuery:"DIDComm Query",omit:"Off"}},display:{label:"Display",full:{name:"My Client Display Name",uri:"https://example.net/client"},handle:"VBUEOIQA82PBY2ZDJW7Q",options:{full:"Full",handle:"Handle",omit:"Off"}},user:{label:"User",full:{assertion:"eyJraWQiOiIxZTlnZGs3IiwiYWxnIjoiUlMyNTYifQ.ewogImlzcyI6ICJodHRwOi8vc2VydmVyLmV4YW1wbGUuY29tIiwKICJzdWIiOiAiMjQ4Mjg5NzYxMDAxIiwKICJhdWQiOiAiczZCaGRSa3F0MyIsCiAibm9uY2UiOiAibi0wUzZfV3pBMk1qIiwKICJleHAiOiAxMzExMjgxOTcwLAogImlhdCI6IDEzMTEyODA5NzAsCiAibmFtZSI6ICJKYW5lIERvZSIsCiAiZ2l2ZW5fbmFtZSI6ICJKYW5lIiwKICJmYW1pbHlfbmFtZSI6ICJEb2UiLAogImdlbmRlciI6ICJmZW1hbGUiLAogImJpcnRoZGF0ZSI6ICIwMDAwLTEwLTMxIiwKICJlbWFpbCI6ICJqYW5lZG9lQGV4YW1wbGUuY29tIiwKICJwaWN0dXJlIjogImh0dHA6Ly9leGFtcGxlLmNvbS9qYW5lZG9lL21lLmpwZyIKfQ.rHQjEmBqn9Jre0OLykYNnspA10Qql2rvx4FsD00jwlB0Sym4NzpgvPKsDjn_wMkHxcp6CilPcoKrWHcipR2iAjzLvDNAReF97zoJqq880ZD1bwY82JDauCXELVR9O6_B0w3K-E7yM2macAAgNCUwtik6SjoSUZRcf-O5lygIyLENx882p6MtmwaL1hd6qn5RZOQ0TLrOYu0532g9Exxcm-ChymrB4xLykpDj3lUivJt63eEGGN6DH5K6o33TcxkIjNrCD4XB1CKKumZvCedgHHF3IAK4dVEDSUoGlH9z4pP_eWYNXvqQOjGs-rDaQzUHl6cQQWNiDpWOl_lxXjQEvQ",type:"oidc_id_token"},handle:"XUT2MFM1XBIKJKSDU8QM",options:{full:"Full",handle:"Handle",omit:"Off"}},capabilities:{label:"Capabilities",full:["jwsd","mtls","extension-B"],options:{full:"On",omit:"Off"}}},t.state={selected:{display:"full",resources:"handle",interact:"redirect",key:"jwsd",user:"omit",capabilities:"omit"}},t.change=function(e){return function(a){if("all"!==e){var n=t.state.selected;n[e]=a,t.setState({selected:n})}else Object.keys(t.state.selected).forEach(function(e){t.change(e)(a)})}},t.render=function(){var e=Object.keys(t.codeValues).reduce(function(e,a){return e[a]=t.codeValues[a][t.state.selected[a]],e},{}),a=Object.keys(t.codeValues).map(function(e){return r.a.createElement(d.a,{onChange:t.change(e),label:t.codeValues[e].label,selected:t.state.selected[e],options:t.codeValues[e].options})}).concat(r.a.createElement(d.a,{onChange:t.change("all"),label:"All",all:!0,options:{full:"Full",handle:"Handle",omit:"Off"}}));return r.a.createElement("div",null,r.a.createElement(u.a,null,a),r.a.createElement(h.a,{from:"client",to:"as",code:e}))},t}return s()(t,e),t}(r.a.Component),f=a(157);a.d(t,"default",function(){return D}),a.d(t,"_frontmatter",function(){return w});var y={},D=function(e){function t(t){var a;return(a=e.call(this,t)||this).layout=m.a,a}return s()(t,e),t.prototype.render=function(){var e=this.props,t=e.components,a=o()(e,["components"]);return r.a.createElement(l.MDXTag,{name:"wrapper",Layout:this.layout,layoutProps:Object.assign({},y,a),components:t},r.a.createElement(f.a,{title:"Transaction Request",keywords:["oauth","authorization","security"]}),r.a.createElement(l.MDXTag,{name:"h1",components:t},"Transaction Request"),r.a.createElement(l.MDXTag,{name:"p",components:t},"The client begins the transaction by creating a transaction request. This is a ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"JSON")," document ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"POST"),"ed to the authorization server's transaction endpoint. This request starts the transaction regardless of the type of client, the type of resource being accessed, or the type of authorizations needed to access said resources. "),r.a.createElement(l.MDXTag,{name:"p",components:t},"The transaction request contains five parts:"),r.a.createElement(l.MDXTag,{name:"ul",components:t},r.a.createElement(l.MDXTag,{name:"li",components:t,parentName:"ul"},r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"li"},"resources")," contains a list of resources that the client is requesting access to"),r.a.createElement(l.MDXTag,{name:"li",components:t,parentName:"ul"},r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"li"},"key")," contains information about the key the client is able to provide proof of possession for during this transaction and any related actions"),r.a.createElement(l.MDXTag,{name:"li",components:t,parentName:"ul"},r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"li"},"display")," includes information about how the client software making the request"),r.a.createElement(l.MDXTag,{name:"li",components:t,parentName:"ul"},r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"li"},"interact")," contains information about how the client is able to get the user to interact with the AS, if necessary"),r.a.createElement(l.MDXTag,{name:"li",components:t,parentName:"ul"},r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"li"},"user")," contains assertions about the current user "),r.a.createElement(l.MDXTag,{name:"li",components:t,parentName:"ul"},r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"li"},"capabilities")," allows a client to list large pieces of functionality and extensions that it can support")),r.a.createElement(l.MDXTag,{name:"p",components:t},"Each ot these sections is optional and can be also sent as a handle instead. When sent as a handle, the AS looks up the handle value to determine the values associated with that handle. The AS can also limit which values can be used together, such as only allowing certain callback URIs or display information for a particular key handle. "),r.a.createElement(l.MDXTag,{name:"p",components:t},"Note that the JSON in all sections is potentially multimodal. That is to say, when sent as a fully-formed request, it is a JSON ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"object"),". When sent as a handle, it is sent as a JSON ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"string"),". "),r.a.createElement(l.MDXTag,{name:"p",components:t},"This example shows how the different sections can be composed with each other in a transaction request."),r.a.createElement(g,null),r.a.createElement(l.MDXTag,{name:"p",components:t},"Each of the sections is detailed below. The AS will send a ",r.a.createElement(p.a,{to:"/transactionresponse"},"transaction response")," in response."),r.a.createElement(l.MDXTag,{name:"h2",components:t},"Display"),r.a.createElement(l.MDXTag,{name:"p",components:t},"The ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"display")," section describes the client software that is making the request. This information can be used during any interaction with the user that the AS might need to do, and for auditing and review of authorization decisions. "),r.a.createElement(l.MDXTag,{name:"p",components:t},"The AS can statically issue a display handle to a piece of software (or its developer) to be used in place of this section. In this way, it takes the place of the ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"client_id")," and ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"client_secret")," of OAuth 2. In these cases, the AS will likely also keep references to which ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"resources")," the client can ask for, which ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"interact")," methods it is allowed to use, which ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"key"),"s it is allowed to present, and even what kinds of ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"user")," information it can assert. "),r.a.createElement(l.MDXTag,{name:"p",components:t},"An AS can also dynamically generate a display handle and return it to the client during the initial transaction response. This handle can be used by the same piece of software to identify itself in future transactions."),r.a.createElement(l.MDXTag,{name:"h2",components:t},"Resources"),r.a.createElement(l.MDXTag,{name:"p",components:t},"The ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"resources")," parameter contains a list of all resources and APIs the client wishes to access. Each object in this array lists the types of actions the client can take, the URIs where those actions can be taken, and the kinds of data that the client expects access to. "),r.a.createElement(h.a,{code:{actions:["read","write","dolphin"],locations:["https://server.example.net/","https://resource.local/other"],datatype:["metadata","images"]}}),r.a.createElement(l.MDXTag,{name:"p",components:t},"An AS can publish pre-set resources as resource handles that can be passed by the client to the AS during a transaction request, similar to OAuth 2's ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"scope")," concept. The AS can determine a default set of resources for a client not asking for anything specifically."),r.a.createElement(l.MDXTag,{name:"p",components:t},"An AS can also dynamically generate a resources handle and return it to the client during the initial transaction response. This handle can be used by the same piece of software to identify this same kind of request in future transactions."),r.a.createElement(l.MDXTag,{name:"p",components:t},"The client can send several of these objects of handles in a single request, which the AS interprets as the client requesting access to all of the resources. "),r.a.createElement(l.MDXTag,{name:"h2",components:t},"Interact"),r.a.createElement(l.MDXTag,{name:"p",components:t},"The ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"interact")," parameter lets the client tell the AS how to get a user to interact with the AS during a transaction. A client could be capable of multiple forms of interaction with the user, from redirecting to an arbitrary URL, to displaying a user code, to relaying messages to another piece of software. "),r.a.createElement(l.MDXTag,{name:"p",components:t},"More detail is found in the ",r.a.createElement(p.a,{to:"/interaction"},"Interaction")," section."),r.a.createElement(l.MDXTag,{name:"blockquote",components:t},r.a.createElement(l.MDXTag,{name:"p",components:t,parentName:"blockquote"},"Do we care about an interact handle? Redirect based clients need to send a new ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"nonce")," parameter every time anyway, and could potentially send a new callback URL while they're at it. Any matching on callback URI's can be tied to keys and would need to have the same rules as a dynamic registration system would have anyway. ")),r.a.createElement(l.MDXTag,{name:"h2",components:t},"Key"),r.a.createElement(l.MDXTag,{name:"p",components:t},"The ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"key")," parameter lets the client tell the AS which keys it is able to prove ownership of during the course of the transaction. The ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"proof")," parameter indicates how the client can provide proof of those keys, and may be one of ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"jwsd"),", ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"httpsig"),", or ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"mtls"),". "),r.a.createElement(l.MDXTag,{name:"p",components:t},"The AS can statically issue a key handle to a piece of software (or its developer). An AS can also dynamically generate a key handle and return it to the client during the initial transaction. This handle can be used by the same piece of software to identify its keys in future transactions. The key handle stands in for both the key and its proof mechanism. The key handle does not need to be derived from the key ID, CN, or other identifying information found in the key itself. "),r.a.createElement(l.MDXTag,{name:"p",components:t},"Any keys referenced here, whether directly by value or by reference through a handle, have to be proved by the client during every request in the transaction. More detail is found in the ",r.a.createElement(p.a,{to:"/keys"},"Keys")," section. "),r.a.createElement(l.MDXTag,{name:"blockquote",components:t},r.a.createElement(l.MDXTag,{name:"p",components:t,parentName:"blockquote"},"We need a mechanism for the AS to issue keys to the client during this process, and to acknowledge that it's accepted the presentation and proof of any keys sent by the client.")),r.a.createElement(l.MDXTag,{name:"h2",components:t},"User"),r.a.createElement(l.MDXTag,{name:"p",components:t},"The ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"user")," parameter lets the client pass information to the AS about the current user in the form of an assertion or other set of claims gathered from a trusted source. These claims need to be able to be validated by the AS, and it should be additionally validated that the client is an authorized holder of this information. "),r.a.createElement(l.MDXTag,{name:"p",components:t},"While this does not necessarily prove that the user in question is actually present with the client, it can allow the AS to make authorization decisions without user interaction in appropriately trusted scenarios."),r.a.createElement(l.MDXTag,{name:"p",components:t},"The AS can dynamically generate a user handle and return it to the client in the transaction response. This handle can be used by the same piece of software to identify the same user in future transactions. In this way, it is similar to the persistent claims token from UMA 2."),r.a.createElement(l.MDXTag,{name:"h2",components:t},"Capabilities"),r.a.createElement(l.MDXTag,{name:"p",components:t},"The ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"capabilities")," parameter lets the client tell the AS about extensions and functions to the XYZ protocol that it can support. If the client sends this parameter, the AS returns its own ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"capabilities")," array selecting which of the client's functions it can support. The client can then self-configure for the ensuing transaction based on these values. If the client does not include this block in the request, the AS does not return a ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"capabilities")," array in the response. "),r.a.createElement(l.MDXTag,{name:"blockquote",components:t},r.a.createElement(l.MDXTag,{name:"p",components:t,parentName:"blockquote"},"Could the client send a request with only the ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"capabilities")," block to effectively do a discovery/registration in one step?")),r.a.createElement(l.MDXTag,{name:"p",components:t},"The values in the ",r.a.createElement(l.MDXTag,{name:"inlineCode",components:t,parentName:"p"},"capabilities")," array map to specific features or extensions. "),r.a.createElement(l.MDXTag,{name:"blockquote",components:t},r.a.createElement(l.MDXTag,{name:"p",components:t,parentName:"blockquote"},"This needs to be a registry and the core spec needs to have clear definitions on how to build these extensions, including which sections and actions they affect. ")),r.a.createElement(l.MDXTag,{name:"h1",components:t},"Continuation Request"),r.a.createElement(l.MDXTag,{name:"p",components:t},"A transaction continuation request is a form of transaction request that continues the transaction for one of a number of reasons."),r.a.createElement(l.MDXTag,{name:"ul",components:t},r.a.createElement(l.MDXTag,{name:"li",components:t,parentName:"ul"},"The client has received a callback on the front channel during ",r.a.createElement(p.a,{to:"/interaction"},"Interaction")," with the user"),r.a.createElement(l.MDXTag,{name:"li",components:t,parentName:"ul"},"The client is waiting for the user to take some action and is polling the transaction"),r.a.createElement(l.MDXTag,{name:"li",components:t,parentName:"ul"},"The client has received information in response to a server challenge that will allow the transaction to progress")),r.a.createElement(h.a,{from:"client",to:"as",code:{handle:"80UPRY5NM33OMUKMKSKU",interact_handle:"CuD9MrpSXVKvvI6dN1awtNLx-HhZy46hJFDBicG4KoZaCmBofvqPxtm7CDMTsUFuvcmLwi_zUN70cCvalI6ENw"}}))},t}(r.a.Component),w={}}}]);
//# sourceMappingURL=component---src-pages-transactionrequest-mdx-1a4c6d0b891135824ec5.js.map